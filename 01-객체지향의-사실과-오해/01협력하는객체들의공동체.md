# 01 / 협력하는 객체들의 공동체

### 객체지향을 향한 걸음

1. 객체지향은 클래스가 아니라 **객체를 바라보는 것**에서부터 시작한다.
2. 객체를 독립적인 존재가 아닌 **기능을 구현하기 위해 협력하는 공동체의 존재**로 바라본다.
3. 협력에 참여하는 객체들에게 얼마나 **적절한 역할과 책임을 부여할 수 있느냐**에 달려있다.
4. 앞서 설명한 3가지 개념들을 **내가 사용하는 프로그래밍 언어라는 틀에 흐트러짐 없이 담아낼 수 있는 기술을 익히는 것**이다.

### 객체지향에서 가장 중요한 개념 3가지

- 역할
- 책임
- 협력

### 커피 주문 이벤트 (협력)

|          | 역할                         | 책임                      |
| -------- | ---------------------------- | ------------------------- |
| 손님     | 커피 주문하는 역할           | 커피를 주문할 책임        |
| 캐시어   | 손님의 커피 주문을 받는 역할 | 손님의 주문을 받을 책임   |
| 바리스타 | 커피를 제조하는 역할         | 주문된 커피를 제조할 책임 |

커피 주문이라는 **협력**에 참여하는 모든 사람들은 커피가 정확하게 주문되고, 주문된 커피가 손님에게 정확히 전달될 수 있도록 맡은 **역할**과 **책임**을 다하고 있다.

## 요청 (request)과 응답 (response)으로 구성된 협력

요청과 응답을 통해 다른 사람과 협력 (collaboration) 하고, 협력의 성공은 특정 역할을 맡은 각 개인이 얼마나 요청을 성실하게 이행하느냐에 달려 있다.

#### 요청 (request)

- 일반적으로 문제 해결을 위해서는 다수의 사람/역할이 필요하기 때문에, 한 사람에 대한 요청이 또 다른 사람에 대한 요청을 유발하는 것이 일반적이다.
- 요청은 연쇄적으로 발생한다.

<img width="780" alt="스크린샷 2022-03-01 오후 3 31 17" src="https://user-images.githubusercontent.com/95578975/156117116-8b6b06d2-4f0d-485d-a101-9ce64d496073.png">

#### 응답 (response)

- 요청을 받은 사람은 주어진 책임을 다하면서 필요한 지식이나 서비스를 제공한다. 즉, 다른 사람의 요청에 응답 (response) 한다. 
- 요청이 연이어 발생하므로 응답 또한 요청과 반대 방향으로 연쇄적으로 전달된다.

<img width="780" alt="스크린샷 2022-03-01 오후 3 34 29" src="https://user-images.githubusercontent.com/95578975/156117424-24a575b8-d1fc-480e-acbd-33ed187811fb.png">

## 역할과 책임

### 역할과 책임

- 협력이 원활히 진행되는 데 필요한 핵심적인 구성 요소
- 역할은 의미적으로 책임 (또는 의무) 이라는 개념을 내포하고, 특정한 역할은 특정한 책임을 암시한다
  -  우리는 프로그래머라는 역할을 맡고, 훌량한 프로그램을 개발할 책임이 있다.
- 협력에 참여하며 특정한 역할을 수행하는 사람들은 역할에 적합한 책임을 수행하게 된다.



사람들이 협력을 위해 특정한 역할을 맡고 역할에 적합한 책임을 수행한다는 사실은 아래 개념들을 제시한다.

- 객체가 (여러 사람이) 동일한 역할을 수행할 수 있다.
  - 손님은 어떤 캐시어가 주문을 받는지는 중요하지 않다. 누구든 캐시어의 역할만 수행한다면 캐시어를 할 수 있다.
- 역할은 **대체 가능성 (substitutable)** 을 의미한다.
  - 캐시어 두 명이 동일한 역할을 수행할 수 있다면, 손님 입장에서 둘 중 어떤 사람이 역할을 수행하더라도 문제가 되지 않는다.
- 각 객체는 책임을 수행하는 방법을 자율적으로 선택할 수 있다. 
  - 커피를 제조하는 동일한 요청을 받더라도 바리스타의 역할을 수행하는 사람들마다 서로 다른 방식으로 요청을 처리한다.
  - 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력 => **다형성 (polymorphism)**
- 하나의 객체가 (한 사람이) 동시에 여러 역할을 수행할 수 있다.
  - 한 사람이 캐시어와 바리스타의 역할을 동시에 수행하는 것도 가능하다.

## 역할, 책임, 협력

객체들은 기능을 구현하기 위해 협력한다.

- 어떻게 협력하는가?
  - 역할과 책임을 수행하며 협력한다.
- 협력의 핵심은?
  - 특정한 핵심을 수행하는 역할들 간의 연쇄적인 요청과 응답을 통해 목표를 달성한다는 것
  - 목표는 사람들의 협력을 통해 달성되며, 더 작은 책임으로 분할되고 책임을 수행할 수 있는 적절한 역할을 가진 사람에 의해 수행된다.

- 사람들은 공통의 목표를 달성하기 위해 협력하고, 객체들은 애플리케이션의 기능을 구현하기 위해 협력한다.



## 협력 속에 사는 객체

- 객체는 애플리케이션의 기능을 구현하기 위해 존재한다.
- 일반적으로 객체는 다른 객체와의 **협력**을 통해 기능을 구현하게 된다.
  - 협력의 품질을 결정하는 것은 객체의 품질이다.



### 객체가 가져야하는 두 가지 덕목

- 객체는 충분히 **협력적**이어야한다.
  - 다른 객체의 명령에 따라 행동하는 수동적인 존재를 의미하는 것은 아니다.
  - 다른 객체의 명령에 복종하는 것이 아니라 요청에 응답할 뿐이다.
- 객체는 충분히 **자율적**이어야한다.
  - 자율적이란, 자기 스스로의 원칙에 따라 어떤 일을 하거나 자기 스스로를 통제하여 절제하는 것
  - 다른 객체의 요청에 어떤 방식으로 응답할지, 요청에 응할지의 여부는 객체 스스로 결정해야한다.

⇒ 객체들은 공동의 목표를 달성하기 위해 협력에 참여하지만 스스로의 결정과 판단에 따라 행동하는 자율적인 존재이다. 다른 객체와 조화롭게 협력할 수 있을 만큼 충분히 개방적인 동시에 협력에 참여하는 방법을 스스로 결정할 수 있도록 충분히 자율적인 객체들의 공동체를 설계하자.



### 상태 (state) 와 행동 (behavior) 을 함께 지닌 자율적인 객체

- 객체가 협력에 참여하기 위해 어떤 행동을 해야 한다면, 그 행동을 하는데 필요한 상태도 함께 지니고 있어야한다.
- 객체의 자율성은 객체의 내부와 외부를 명확하게 구분하는 것으로부터 나온다.
  - 객체의 사적인 부분은 객체 스스로 관리하고 외부에서 간섭할 수 없도록 차단해야한다.
  - 객체의 외부에서는 접근이 허락된 수단을 통해서만 객체와 의사소통해야한다.

- 객체는 다른 객체가 **무엇 (what)을 수행하는지는 알 수 있지만, 어떻게 (how) 수행하는지에 대해서는 알 수 없다.**

- 객체는 행동을 위해 필요한 상태를 포함하는 동시에 (바리스타가 제조 방법 기억하기) 특정한 행동을 수행하는 방법 (바리스타가 알고 있는 방법에 따라 커피 제조하기)을 스스로 결정할 수 있어야한다.

### 협력과 메시지

- 한 객체가 다른 객체에게 **요청하는 것**을 **메시지를 전송한다**고 말하고, 다른 객체로부터 **요청을 받는 것**을 **메시지를 수신한다**고 말한다. 이 때, 메시지를 전송하는 객체를 **송신자 (sender)**, 메시지를 수신하는 객체를 **수신자 (receiver)**라고 한다.

- 객체가 수신된 메시지를 처리하는 방법을 **메서드 (method)**라고 한다.
  - 수신된 메시지에 대응하는 특정 메서드가 실행 시간에 실행된다. 
- 메시지와 메서드의 분리는 객체의 협력에 참여하는 객체들 간의 자율성을 증진시킨다. 캡슐화 (encapsulation)와도 관련이 있다.
  - 메시지: 바리스타로 전달된 커피 제조 요청
  - 메서드: 바리스타가 커피를 제조하는 구체적인 방법

## 객체지향의 본질

- 객체지향이란 시스템을 상호작용하는 **자율적인 객체들의 공동체**로 바라보고 객체를 이용해 시스템을 분할하는 방법이다.
- 자율적인 객체란 **상태**와 행위를 함께 지니며 스스로 자기 자신을 책임지는 객체를 의미한다.
- 객체는 시스템의 행위를 구현하기 위해 다른 객체와 **협력**한다. 각 객체는 협력 내에서 정해진 **역할**을 수행하며 역할은 관련된 **책임**의 집합이다.
- 객체는 다른 객체와 협력하기 위해 메시지를 전송하고, **메시지**를 수신한 객체는 메시지를 처리하는 데 적합한 **메서드**를 자율적으로 선택한다.
